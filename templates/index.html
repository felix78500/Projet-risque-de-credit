<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>La page de test pour tester l'IA</title>
  </head>
  <body>
    <h1>Prédiction de prêt</h1>
        <form id="prediction-form">
            <input type="text" id="person_age" name="person_age" placeholder="Âge" value="22">

            <select id="person_gender" name="person_gender">
                <option value="0">Male</option>
                <option value="1" selected>Female</option>
            </select>

            <select id="person_education" name="person_education">
                <option value="0">Associate</option>
                <option value="1">Bachelor</option>
                <option value="2">Doctorate</option>
                <option value="3">High School</option>
                <option value="4" selected>Master</option>
            </select>

            <input type="text" id="person_income" name="person_income" placeholder="Revenu" value="71948.0">
            <input type="text" id="person_emp_exp" name="person_emp_exp" placeholder="Expérience professionnelle" value="0">

            <select id="person_home_ownership" name="person_home_ownership">
                <option value="0">MORTGAGE</option>
                <option value="1">OTHER</option>
                <option value="2">OWN</option>
                <option value="3" selected>RENT</option>
            </select>

            <input type="text" id="loan_amnt" name="loan_amnt" placeholder="Montant du prêt" value="35000.0">

            <select id="loan_intent" name="loan_intent">
                <option value="0">DEBTCONSOLIDATION</option>
                <option value="1">EDUCATION</option>
                 <option value="2">HOMEIMPROVEMENT</option>
                <option value="3">MEDICAL</option>
                <option value="4" selected>PERSONAL</option>
                <option value="5">VENTURE</option>
            </select>

            <input type="text" id="loan_int_rate" name="loan_int_rate" placeholder="Taux d'intérêt" value="16.02">
            <input type="text" id="loan_percent_income" name="loan_percent_income" placeholder="% du revenu" value="0.49">
            <input type="text" id="cb_person_cred_hist_length" name="cb_person_cred_hist_length" placeholder="Historique crédit" value="3.0">
            <input type="text" id="credit_score" name="credit_score" placeholder="Score crédit" value="561">

            <select id="previous_loan_defaults_on_file" name="previous_loan_defaults_on_file">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>

            <button type="submit">Prédire</button>
        </form>
    <div id="result"></div>

    <script>
        document.getElementById('prediction-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const data = {
                person_age: document.getElementById('person_age').value,
                person_gender: document.getElementById('person_gender').value,
                person_education: document.getElementById('person_education').value,
                person_income: document.getElementById('person_income').value,
                person_emp_exp: document.getElementById('person_emp_exp').value,
                person_home_ownership: document.getElementById('person_home_ownership').value,
                loan_amnt: document.getElementById('loan_amnt').value,
                loan_intent: document.getElementById('loan_intent').value,
                loan_int_rate:document.getElementById('loan_int_rate').value,
                loan_percent_income: document.getElementById('loan_percent_income').value,
                cb_person_cred_hist_length: document.getElementById('cb_person_cred_hist_length').value,
                credit_score: document.getElementById('credit_score').value,
                previous_loan_defaults_on_file: parseInt(document.getElementById('previous_loan_defaults_on_file').value),
            };

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });console.log('Status:', response.status);

                const result = await response.json();
                document.getElementById('result').textContent = `Prédiction: ${result.prediction}`;
            } catch (error) {
                console.error('Erreur:', error);
                document.getElementById('result').textContent = `Erreur: ${error.message}`;
            }
        });
    </script>
  </body>
</html>